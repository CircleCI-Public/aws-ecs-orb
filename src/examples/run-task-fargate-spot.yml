description: Start the run of an ECS task with Fargate Spot instances for increased cost savings.
usage:
  version: 2.1
  orbs:
    aws-ecs: circleci/aws-ecs@x.y.z
  jobs:
    run-task:
      docker:
        - image: 'cimg/python:3.9.1'
      steps:
        - aws-ecs/run-task:
            cluster: cluster1
            task-definition: myapp
            capacity-provider-strategy: "FARGATE_SPOT,weight=1"
            launch-type: ""
  workflows:
    run-task:
      jobs:
        - run-task
